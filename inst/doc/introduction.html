<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Intro to toRvik</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Intro to toRvik</h1>



<p>Hey, everyone, I’m Andrew Weatherman, creator of <a href="https://github.com/andreweatherman/toRvik"><code>toRvik</code></a>
and lover of college basketball analytics. The goal of
<code>toRvik</code> is to expand access to reliable, high-quality CBB
statistics. While analogous packages exist to pull data, like Saiem
Gilani’s brilliant <a href="http://hoopr.sportsdataverse.org/"><code>hoopR</code></a>,
<code>toRvik</code> requires no paid subscription or set-up and can be
immediately utilized by anyone with just a few lines of code.</p>
<div id="install-torvik" class="section level2">
<h2><strong>Install</strong> <a href="https://github.com/andreweatherman/toRvik"><strong><code>toRvik</code></strong></a></h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You can install using {pacman} with the following code:</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">&#39;pacman&#39;</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)){</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">&#39;pacman&#39;</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load_current_gh</span>(<span class="st">&quot;andreweatherman/toRvik&quot;</span>, <span class="at">dependencies =</span> <span class="cn">TRUE</span>, <span class="at">update =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="overview-of-barttorvik-and-torvik" class="section level2">
<h2><strong>Overview of Barttorvik and</strong> <a href="https://github.com/andreweatherman/toRvik"><strong><code>toRvik</code></strong></a></h2>
<p><code>toRvik</code> is a package of scrapers that pull data from <a href="https://barttorvik.com/">Barttorvik</a>, a popular college
basketball analytics website, and return it in tidy format. Barttorvik
splits its data on a number of variables and hosts detailed player and
game statistics, while serving as a reputable, industry-recognized
metric rating system. Generally speaking, all data is avaliable back to
the 2007-08 season. More information about Barttorvik, its data, and its
metric rating system can be found <a href="http://adamcwisports.blogspot.com/p/every-possession-counts.html">here</a>.</p>
<p>Package functions are syntactically structured to point to their data
source (e.g. by ‘player,’ ‘game,’ etc.) and should be considered
<code>get</code> functions by nature. As of <code>toRvik</code> version
1.0.3, the package exports nearly 30 functions covering the website and
its data. Some highlights include:</p>
<ul>
<li>Retrieving detailed game-by-game player statistics</li>
<li>Splitting advanced metrics by game location, type, date range, or
opponent strength</li>
<li>Pulling play-by-play shooting bins for players and teams</li>
<li>Grabbing composite recruit rankings for top players by coach</li>
<li>Generating injury-adjusted efficiency measures by team</li>
</ul>
</div>
<div id="quick-start-with-ratings" class="section level2">
<h2><strong>Quick start with ratings</strong></h2>
<p><code>toRvik</code> requires no set-up and can be instantly executed
in any session. To understand the package, the T-Rank functions, pulling
and splitting Barttorvik’s metric rating system, are an excellent place
to start. Let’s take a glance at the top teams in T-Rank using
<code>toRvik</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">tic</span>()</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>toRvik<span class="sc">::</span><span class="fu">bart_ratings</span>(<span class="at">year=</span><span class="dv">2022</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Team Ratings: 2022 ────────────────────────────────────────── toRvik 1.1.0 ──</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ Data updated: 2022-09-09 08:24:24 EDT</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 10 × 19</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    team    conf  barthag barth…¹ adj_o adj_o…² adj_d adj_d…³ adj_t adj_t…⁴   wab</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;int&gt; &lt;dbl&gt;   &lt;int&gt; &lt;dbl&gt;   &lt;int&gt; &lt;dbl&gt;   &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 Gonzaga WCC     0.966       1  120.       4  89.9       9  72.6       5  6.71</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 Houston Amer    0.959       2  117.      10  88.5       6  63.7     336  6.15</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 Kansas  B12     0.958       3  120.       5  91.3      13  69.1      71 10.4 </span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 Texas … B12     0.951       4  111.      41  85.4       1  66.3     223  6.57</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 Baylor  B12     0.949       5  118.       8  91.3      14  67.6     149  8.91</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 Duke    ACC     0.944       6  123.       1  96.0      53  67.4     161  7.19</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 Tennes… SEC     0.944       7  111.      34  87.1       3  67.4     164  7.96</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 Villan… BE      0.935       8  117.       9  93.0      26  62.2     350  7.29</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 Arizona P12     0.934       9  118.       7  93.7      35  72.3       9  8.76</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 UCLA    P12     0.932      10  116.      12  92.2      20  65.4     274  5.06</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 8 more variables: nc_elite_sos &lt;int&gt;, nc_fut_sos &lt;dbl&gt;,</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   nc_cur_sos &lt;dbl&gt;, ov_elite_sos &lt;int&gt;, ov_fut_sos &lt;dbl&gt;, ov_cur_sos &lt;dbl&gt;,</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   seed &lt;dbl&gt;, year &lt;int&gt;, and abbreviated variable names ¹​barthag_rk,</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   ²​adj_o_rk, ³​adj_d_rk, ⁴​adj_t_rk</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">toc</span>()</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.37 sec elapsed</span></span></code></pre></div>
<p>Here, the <code>bart_ratings</code> function returned the top ten
teams in T-Rank in the current season. We are also presented with each
team’s adjusted efficiencies, their adjusted tempo, and two forms of
strength of schedule (documented in <code>bart_ratings</code>). But what
if we want these same measures in home games only? We would use
<code>bart_factors</code> and input ‘H’ as location:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">tic</span>()</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>toRvik<span class="sc">::</span><span class="fu">bart_factors</span>(<span class="at">location=</span><span class="st">&#39;H&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Team Factors ──────────────────────────────────────────────── toRvik 1.1.0 ──</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ Data updated: 2022-09-09 08:24:25 EDT</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 10 × 22</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    team     conf  rating  rank adj_o adj_o…¹ adj_d adj_d…² tempo off_ppp off_efg</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 Houston  Amer    32.7     1  116.      15  83.0       1  66.1    117.    54.2</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 Gonzaga  WCC     29.7     2  120.       5  89.9      18  72.7    123.    60.1</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 Baylor   B12     28.8     3  116.       9  87.6       9  69.3    116.    55.0</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 Villano… BE      28.8     4  123.       2  94.0      50  63.2    122.    57.6</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 Purdue   B10     28.4     5  124.       1  96.0      81  67.9    125.    58.2</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 Auburn   SEC     27.6     6  115.      17  87.5       8  72.9    113.    53.1</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 Texas T… B12     27.5     7  116.      14  88.2      11  68.6    116.    57.3</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 Tenness… SEC     27.5     8  113.      28  86.0       6  69.5    112.    53.1</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 UCLA     P12     26.5     9  116.      11  89.7      16  69.6    115.    54.3</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 Texas    B12     25.3    10  109.      65  83.4       2  63.8    109.    51.6</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 11 more variables: off_to &lt;dbl&gt;, off_or &lt;dbl&gt;, off_ftr &lt;dbl&gt;,</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   def_ppp &lt;dbl&gt;, def_efg &lt;dbl&gt;, def_to &lt;dbl&gt;, def_or &lt;dbl&gt;, def_ftr &lt;dbl&gt;,</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   wins &lt;int&gt;, losses &lt;int&gt;, games &lt;int&gt;, and abbreviated variable names</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   ¹​adj_o_rank, ²​adj_d_rank</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">toc</span>()</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.43 sec elapsed</span></span></code></pre></div>
<p>And now, we have four factor data and metric ratings for <em>home
games only</em>. The <code>bart_factors</code> function, and the
analogous <code>bart_conf_factors</code>, takes venue, game type, date
range, and opponent strength as additional splits. Great, but what if we
want to explore rating trends over time? <code>toRvik</code> gives us
that ability with <code>bart_archive</code>, a function that pulls
adjusted ratings and projected records from the morning of a desired
date:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">tic</span>()</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>toRvik<span class="sc">::</span><span class="fu">bart_archive</span>(<span class="st">&#39;20220113&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Archive Ratings ───────────────────────────────────────────── toRvik 1.1.0 ──</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ Data updated: 2022-09-09 08:24:25 EDT</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 10 × 16</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     rank team   conf  record barthag adj_o adj_o…¹ adj_d adj_d…² adj_t…³ adj_t…⁴</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;   &lt;int&gt; &lt;dbl&gt;   &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1   125 Abile… WAC   11-5    0.612  100.      239  96.2      46    71.3      58</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2   260 Air F… MWC   8-5     0.321   93.7     331 100.      114    63.9     342</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3   151 Akron  MAC   9-4     0.535  105.      130 104.      188    64.9     327</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4    21 Alaba… SEC   11-5    0.880  117.       10  98.7      89    72.3      28</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5   330 Alaba… SWAC  4-10    0.155   88.5     356 103.      156    67.6     234</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6   305 Alaba… SWAC  4-13    0.199   95.8     309 108.      285    72.0      37</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7   303 Albany AE    5-10    0.205   91.3     351 103.      158    66.2     305</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8   262 Alcor… SWAC  4-11    0.316   98.5     266 105.      224    68.0     207</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9   347 Ameri… Pat   4-10    0.0910  93.9     329 115.      347    67.2     262</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10   188 Appal… SB    9-9     0.451  100.      235 102.      144    64.3     338</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 5 more variables: proj_record &lt;chr&gt;, proj_conf_record &lt;chr&gt;,</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   wab &lt;dbl&gt;, wab_rk &lt;int&gt;, date &lt;chr&gt;, and abbreviated variable names</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   ¹​adj_o_rk, ²​adj_d_rk, ³​adj_tempo, ⁴​adj_tempo_rk</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">toc</span>()</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.33 sec elapsed</span></span></code></pre></div>
</div>
<div id="exploring-player-and-game-data" class="section level2">
<h2><strong>Exploring player and game data</strong></h2>
<p>Perhaps the most valuable functions in <code>toRvik</code> concern
granular analysis. The package gives us the ability to explore advanced
statistics at a game-by-game level for every Division 1 player since the
2007-08 season using <code>bart_player_game</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">tic</span>()</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>toRvik<span class="sc">::</span><span class="fu">bart_player_game</span>(<span class="at">year=</span><span class="dv">2022</span>, <span class="at">stat=</span><span class="st">&#39;advanced&#39;</span>, <span class="at">team=</span><span class="st">&#39;Duke&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(net)) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Player Game Stats ─────────────────────────────────────────── toRvik 1.1.0 ──</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ Data updated: 2022-09-09 08:24:26 EDT</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 10 × 25</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    date       year player exp   team  conf  opp   result   min   pts   usg  ortg</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 2021-12-…  2022 AJ Gr… Fr    Duke  ACC   Sout… W         22    19  16.7  214.</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 2021-11-…  2022 Wende… Jr    Duke  ACC   Army  W         35    19  22.9  142.</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 2021-11-…  2022 Wende… Jr    Duke  ACC   Lafa… W         29    23  25.2  159.</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 2022-01-…  2022 Mark … So    Duke  ACC   Nort… W         27    19  25    144.</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 2022-03-…  2022 Mark … So    Duke  ACC   Cal … W         32    15  19.5  156.</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 2021-11-…  2022 Paolo… Fr    Duke  ACC   The … W         31    28  29.3  157.</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 2022-03-…  2022 Paolo… Fr    Duke  ACC   Texa… W         37    22  23.6  146.</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 2022-01-…  2022 AJ Gr… Fr    Duke  ACC   Loui… W         34    22  17.2  163.</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 2022-03-…  2022 Trevo… Fr    Duke  ACC   Pitt… W         34    27  25.9  175.</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 2021-11-…  2022 AJ Gr… Fr    Duke  ACC   Lafa… W         21    18  16.4  188.</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 13 more variables: or_pct &lt;dbl&gt;, dr_pct &lt;dbl&gt;, ast_pct &lt;dbl&gt;,</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   to_pct &lt;dbl&gt;, stl_pct &lt;dbl&gt;, blk_pct &lt;dbl&gt;, bpm &lt;dbl&gt;, obpm &lt;dbl&gt;,</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   dbpm &lt;dbl&gt;, net &lt;dbl&gt;, poss &lt;dbl&gt;, id &lt;dbl&gt;, game_id &lt;chr&gt;</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">toc</span>()</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.59 sec elapsed</span></span></code></pre></div>
<p>Here, <code>bart_player_game</code> returned the 10 highest
individual net BPMs by a Duke player this season. The function takes
‘box,’ ‘shooting,’ and ‘advanced’ as stat inputs, and I welcome you to
explore each one in your own session. But what if we want to investigate
similar performance at a season level? Well,
<code>bart_player_season</code> gives us that option – also taking
‘box,’ ‘shooting,’ and ‘advanced’ as stat inputs.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">tic</span>()</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>toRvik<span class="sc">::</span><span class="fu">bart_player_season</span>(<span class="at">year=</span><span class="dv">2022</span>, <span class="at">stat=</span><span class="st">&#39;shooting&#39;</span>, <span class="at">team=</span><span class="st">&#39;Duke&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(mid_a)) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>(<span class="dv">5</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Player Season Stats ───────────────────────────────────────── toRvik 1.1.0 ──</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ Data updated: 2022-09-09 08:24:26 EDT</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 33</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   player pos   exp   team  conf      g   mpg   ppg p_per   usg  ortg   efg    ts</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Paolo… Wing… Fr    Duke  ACC      39  33.0 17.2   20.9  27.2  111.  52    55.7</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Wende… Comb… Jr    Duke  ACC      39  33.9 13.4   15.8  20.3  121.  56.9  60.5</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 AJ Gr… Wing… Fr    Duke  ACC      39  24.3 10.4   17.1  16.9  127.  61.3  63.0</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Jerem… Comb… So    Duke  ACC      39  29    8.62  11.9  17.7  105.  47.7  51.5</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Trevo… Comb… Fr    Duke  ACC      36  30.2 11.5   15.2  20.1  110.  49.6  52.0</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 20 more variables: ftm &lt;int&gt;, fta &lt;int&gt;, ft_pct &lt;dbl&gt;, two_m &lt;int&gt;,</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   two_a &lt;int&gt;, two_pct &lt;dbl&gt;, three_m &lt;int&gt;, three_a &lt;int&gt;, three_pct &lt;dbl&gt;,</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   dunk_m &lt;dbl&gt;, dunk_a &lt;dbl&gt;, dunk_pct &lt;dbl&gt;, rim_m &lt;dbl&gt;, rim_a &lt;dbl&gt;,</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   rim_pct &lt;dbl&gt;, mid_m &lt;dbl&gt;, mid_a &lt;dbl&gt;, mid_pct &lt;dbl&gt;, year &lt;int&gt;,</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   id &lt;int&gt;</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">toc</span>()</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.38 sec elapsed</span></span></code></pre></div>
<p>And now, we have a tibble of season-long shooting data for Duke
players, sorted by number of mid-range attempts. Advanced metric data
can be pulled by team on a per-game basis using
<code>bart_team_schedule</code>, and total team shooting splits can be
accessed using <code>bart_team_shooting</code>. Game box data can be
pulled with <code>bart_game_total</code>.</p>
</div>
<div id="investigating-the-ncaa-tournament" class="section level2">
<h2><strong>Investigating the NCAA tournament</strong></h2>
<p>Lastly for this introductory vignette, we will explore
<code>toRvik</code> functions for scraping tournament data. Frequent any
time on social media in college basketball circles in March, and you
will undoubtedly hear about ‘team sheets,’ detailed repositories of
strength and quality metrics used by the seeding and selection
committee. With <code>bart_tourney_sheets</code>, you can pull
‘quick-hit’ team sheets in tidy format with just a single line of
code:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">tic</span>()</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>toRvik<span class="sc">::</span><span class="fu">bart_tourney_sheets</span>(<span class="at">year=</span><span class="dv">2022</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 10 × 16</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    team     seed   net   kpi   sor res_avg   bpi    kp   sag qual_…¹ q1a   q1   </span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 Gonzaga     1     1     5     7     6       1     1     1     1   5-2   10-3 </span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 Arizona     1     2     3     2     2.5     3     2     2     2.3 4-2   6-3  </span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 Houston     5     3    13    14    13.5     2     4     5     3.7 0-3   1-4  </span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 Baylor      1     4     2     4     3       6     5     4     5   4-4   10-5 </span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 Kentuc…     2     5     9     5     7       4     3     6     4.3 3-6   9-7  </span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 Kansas      1     6     1     1     1       8     6     3     5.7 4-4   12-5 </span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 Tennes…     3     7     4     3     3.5     5     7     7     6.3 4-7   11-7 </span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 Villan…     2     8     7     8     7.5     7    11     9     9   5-4   7-6  </span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 Texas …     3     9    17    12    14.5    13     9    14    12   5-5   8-9  </span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 UCLA        4    10    11    15    13       9     8    10     9   2-4   5-4  </span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 4 more variables: q2 &lt;chr&gt;, q1_2 &lt;chr&gt;, q3 &lt;chr&gt;, q4 &lt;chr&gt;, and</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   abbreviated variable name ¹​qual_avg</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">toc</span>()</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.97 sec elapsed</span></span></code></pre></div>
<p>Returned are sheets of top teams sorted by their NCAA NET ranking.
Because this function relies on NET data, it is only available back to
the 2018-19 season. In-season performance is valuable, but what if you
want to investigate <em>just</em> tournament data? Well,
<code>toRvik</code> gives you two options to do so:
<code>bart_tourney_odds</code> and <code>bart_tourney_results</code>.
The former returns metric-adjusted round probabilities by split. Let’s
explore round odds for the 2022 NCAA Tournament:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">tic</span>()</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>toRvik<span class="sc">::</span><span class="fu">bart_tourney_odds</span>(<span class="at">year=</span><span class="dv">2022</span>, <span class="at">odds=</span><span class="st">&#39;pre&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(s16)) <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 10 × 11</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     seed region  team       conf    r64   r32   s16    e8    f4    f2 champ</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1     1 West    Gonzaga    WCC     100  96.6  81.9  69.6  52    38.5  27.5</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2     1 Midwest Kansas     B12     100  96.3  73.7  48.7  32.5  17.7   8.5</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3     1 South   Arizona    P12     100  94.8  72.7  37.3  21.2  12     5.4</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4     1 East    Baylor     B12     100  94.9  72.5  42.9  25.2  11.1   5.8</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5     2 Midwest Auburn     SEC     100  91.5  70    48.4  24.8  11.7   4.8</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6     2 West    Duke       ACC     100  94.1  69.8  38.9  15.5   8.2   4  </span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7     3 West    Texas Tech B12     100  92.6  68.4  40.9  17.1   9.5   5  </span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8     3 South   Tennessee  SEC     100  92.3  67.5  41    20.8  11.6   5.2</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9     5 Midwest Iowa       B10     100  84.3  64.5  32.2  19.3   9.2   3.7</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     2 South   Villanova  BE      100  90.8  63.6  34.6  16.1   8.4   3.5</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">toc</span>()</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.24 sec elapsed</span></span></code></pre></div>
<p>With the ‘odds’ argument set to ‘pre,’ we returned pre-tournament
odds and sorted by likelihood to reach the second weekend (Sweet 16).
<code>bart_tourney_odds</code> also takes current odds (‘current’), odds
based on recent performance (‘recent’), and odds based on games against
strong opponents (‘t100’). This data is similarly available starting
with the 2019 tournament. Now, what if we want to explore tournament
results?</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">tic</span>()</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>toRvik<span class="sc">::</span><span class="fu">bart_tourney_results</span>(<span class="at">min_year=</span><span class="dv">2011</span>, <span class="at">max_year=</span><span class="dv">2021</span>, <span class="at">type=</span><span class="st">&#39;conf&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>(<span class="dv">5</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 18</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   conf   pake  pase  wins  loss w_percent   r64   r32   s16    e8    f4    f2</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 P12    11.2  11.4    55    38     0.591    38    27    18     8     2     0</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 SEC    10.9  15.5    78    48     0.619    49    33    21    14     7     2</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 MVC     4.1   6.1    19    15     0.559    15    11     4     2     2     0</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 ACC     3.6  -0.3   102    61     0.626    64    44    31    15     5     4</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Horz    2.6   3       5    10     0.333    10     1     1     1     1     1</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 6 more variables: champ &lt;dbl&gt;, top2 &lt;dbl&gt;, f4_percent &lt;dbl&gt;,</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   champ_percent &lt;dbl&gt;, from &lt;dbl&gt;, to &lt;dbl&gt;</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>tictoc<span class="sc">::</span><span class="fu">toc</span>()</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.5 sec elapsed</span></span></code></pre></div>
<p>With <code>bart_tourney_results</code>, we can return raw and
adjusted outcomes by split. Here, we returned aggregate conference
results from 2011 to 2021, sorted by PAKE – the number of wins attained
above or below KenPom expectation. The function splits by team (‘team’),
conference (‘conf’), coach (‘coach’), and seed (‘seed’) and includes
data starting in 2000.</p>
</div>
<div id="and-youre-off" class="section level2">
<h2><strong>And you’re off!</strong></h2>
<p><code>toRvik</code> includes several additional functions and
capabilities that I did not describe here; take time to explore them and
those detailed in this introduction. If you have any questions, feel
free to message me on <a href="https://twitter.com/andreweatherman">Twitter</a>. If you run into
any bugs, please open an issue on the <a href="https://github.com/andreweatherman/toRvik/issues">GitHub</a>.
Happy exploring!</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
